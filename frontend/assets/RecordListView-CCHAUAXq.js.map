{"version":3,"file":"RecordListView-CCHAUAXq.js","sources":["../../src/views/records/RecordListView.vue"],"sourcesContent":["<template>\r\n  <div class=\"record-list\">\r\n    <el-card>\r\n      <template #header>\r\n        <div class=\"card-header\">\r\n          <span>记录管理</span>\r\n          <el-button type=\"primary\" @click=\"handleCreate\">\r\n            <el-icon><Plus /></el-icon>\r\n            新建记录\r\n          </el-button>\r\n        </div>\r\n      </template>\r\n\r\n      <!-- 搜索栏 -->\r\n      <div class=\"search-bar\">\r\n        <el-form :model=\"searchForm\" inline>\r\n          <el-form-item label=\"标题\">\r\n            <el-input v-model=\"searchForm.title\" placeholder=\"请输入记录标题\" clearable />\r\n          </el-form-item>\r\n          <el-form-item label=\"类型\">\r\n            <el-select v-model=\"searchForm.type\" placeholder=\"请选择记录类型\" clearable>\r\n              <el-option label=\"工作记录\" value=\"work\" />\r\n              <el-option label=\"学习笔记\" value=\"study\" />\r\n              <el-option label=\"项目文档\" value=\"project\" />\r\n              <el-option label=\"其他\" value=\"other\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item label=\"状态\">\r\n            <el-select v-model=\"searchForm.status\" placeholder=\"请选择状态\" clearable>\r\n              <el-option label=\"草稿\" value=\"draft\" />\r\n              <el-option label=\"已发布\" value=\"published\" />\r\n              <el-option label=\"已归档\" value=\"archived\" />\r\n            </el-select>\r\n          </el-form-item>\r\n          <el-form-item>\r\n            <el-button type=\"primary\" @click=\"handleSearch\">搜索</el-button>\r\n            <el-button @click=\"handleReset\">重置</el-button>\r\n          </el-form-item>\r\n        </el-form>\r\n      </div>\r\n\r\n      <!-- 记录表格 -->\r\n      <el-table :data=\"records\" v-loading=\"loading\" stripe>\r\n        <el-table-column type=\"selection\" width=\"55\" />\r\n        <el-table-column prop=\"id\" label=\"ID\" width=\"80\" />\r\n        <el-table-column prop=\"title\" label=\"标题\" min-width=\"200\" show-overflow-tooltip />\r\n        <el-table-column prop=\"type\" label=\"类型\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag>{{ getTypeText(row.type) }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\r\n          <template #default=\"{ row }\">\r\n            <el-tag :type=\"getStatusType(row.status)\">\r\n              {{ getStatusText(row.status) }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"creator\" label=\"创建者\" width=\"120\">\r\n          <template #default=\"{ row }\">\r\n            {{ row.creator?.username || '-' }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column prop=\"createdAt\" label=\"创建时间\" width=\"160\">\r\n          <template #default=\"{ row }\">\r\n            {{ formatTime(row.createdAt) }}\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"操作\" width=\"200\" fixed=\"right\">\r\n          <template #default=\"{ row }\">\r\n            <el-button size=\"small\" @click=\"handleView(row)\">查看</el-button>\r\n            <el-button size=\"small\" @click=\"handleEdit(row)\">编辑</el-button>\r\n            <el-button size=\"small\" type=\"danger\" @click=\"handleDelete(row)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n\r\n      <!-- 分页 -->\r\n      <div class=\"pagination\">\r\n        <el-pagination\r\n          v-model:current-page=\"pagination.page\"\r\n          v-model:page-size=\"pagination.size\"\r\n          :total=\"pagination.total\"\r\n          :page-sizes=\"[10, 20, 50, 100]\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n        />\r\n      </div>\r\n    </el-card>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive, onMounted } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage, ElMessageBox } from 'element-plus'\r\nimport { Plus } from '@element-plus/icons-vue'\r\nimport { http } from '@/utils/request'\r\nimport dayjs from 'dayjs'\r\n\r\nconst router = useRouter()\r\n\r\n// 响应式数据\r\nconst loading = ref(false)\r\nconst records = ref([])\r\n\r\nconst searchForm = reactive({\r\n  title: '',\r\n  type: '',\r\n  status: ''\r\n})\r\n\r\nconst pagination = reactive({\r\n  page: 1,\r\n  size: 20,\r\n  total: 0\r\n})\r\n\r\n// 获取记录列表\r\nconst fetchRecords = async () => {\r\n  loading.value = true\r\n  try {\r\n    // TODO: 调用实际API\r\n    // const params = {\r\n    //   ...searchForm,\r\n    //   page: pagination.page,\r\n    //   size: pagination.size\r\n    // }\r\n    // const response = await http.get('/records', { params })\r\n    // records.value = response.items\r\n    // pagination.total = response.total\r\n    \r\n    // 模拟数据\r\n    records.value = [\r\n      {\r\n        id: 1,\r\n        title: '项目需求分析文档',\r\n        type: 'project',\r\n        status: 'published',\r\n        creator: { username: 'admin' },\r\n        createdAt: new Date().toISOString()\r\n      },\r\n      {\r\n        id: 2,\r\n        title: '学习Vue3笔记',\r\n        type: 'study',\r\n        status: 'draft',\r\n        creator: { username: 'user1' },\r\n        createdAt: new Date(Date.now() - 86400000).toISOString()\r\n      },\r\n      {\r\n        id: 3,\r\n        title: '周工作总结',\r\n        type: 'work',\r\n        status: 'published',\r\n        creator: { username: 'user2' },\r\n        createdAt: new Date(Date.now() - 172800000).toISOString()\r\n      }\r\n    ]\r\n    pagination.total = 3\r\n  } catch (error) {\r\n    console.error('获取记录列表失败:', error)\r\n    ElMessage.error('获取记录列表失败')\r\n  } finally {\r\n    loading.value = false\r\n  }\r\n}\r\n\r\n// 搜索\r\nconst handleSearch = () => {\r\n  pagination.page = 1\r\n  fetchRecords()\r\n}\r\n\r\n// 重置\r\nconst handleReset = () => {\r\n  Object.assign(searchForm, {\r\n    title: '',\r\n    type: '',\r\n    status: ''\r\n  })\r\n  handleSearch()\r\n}\r\n\r\n// 新建记录\r\nconst handleCreate = () => {\r\n  router.push('/records/create')\r\n}\r\n\r\n// 查看记录\r\nconst handleView = (row: any) => {\r\n  router.push(`/records/${row.id}`)\r\n}\r\n\r\n// 编辑记录\r\nconst handleEdit = (row: any) => {\r\n  router.push(`/records/${row.id}/edit`)\r\n}\r\n\r\n// 删除记录\r\nconst handleDelete = async (row: any) => {\r\n  try {\r\n    await ElMessageBox.confirm('确定要删除这条记录吗？', '提示', {\r\n      confirmButtonText: '确定',\r\n      cancelButtonText: '取消',\r\n      type: 'warning'\r\n    })\r\n    \r\n    // TODO: 调用删除API\r\n    // await http.delete(`/records/${row.id}`)\r\n    \r\n    ElMessage.success('删除成功')\r\n    fetchRecords()\r\n  } catch (error) {\r\n    if (error !== 'cancel') {\r\n      console.error('删除记录失败:', error)\r\n      ElMessage.error('删除记录失败')\r\n    }\r\n  }\r\n}\r\n\r\n// 分页处理\r\nconst handleSizeChange = (size: number) => {\r\n  pagination.size = size\r\n  fetchRecords()\r\n}\r\n\r\nconst handleCurrentChange = (page: number) => {\r\n  pagination.page = page\r\n  fetchRecords()\r\n}\r\n\r\n// 工具函数\r\nconst getTypeText = (type: string) => {\r\n  const typeMap: { [key: string]: string } = {\r\n    work: '工作记录',\r\n    study: '学习笔记',\r\n    project: '项目文档',\r\n    other: '其他'\r\n  }\r\n  return typeMap[type] || type\r\n}\r\n\r\nconst getStatusType = (status: string) => {\r\n  const statusMap: { [key: string]: string } = {\r\n    draft: 'info',\r\n    published: 'success',\r\n    archived: 'warning'\r\n  }\r\n  return statusMap[status] || 'info'\r\n}\r\n\r\nconst getStatusText = (status: string) => {\r\n  const statusMap: { [key: string]: string } = {\r\n    draft: '草稿',\r\n    published: '已发布',\r\n    archived: '已归档'\r\n  }\r\n  return statusMap[status] || status\r\n}\r\n\r\nconst formatTime = (time: string) => {\r\n  return dayjs(time).format('YYYY-MM-DD HH:mm')\r\n}\r\n\r\n// 生命周期\r\nonMounted(() => {\r\n  fetchRecords()\r\n})\r\n</script>\r\n\r\n<style scoped>\r\n.record-list {\r\n  padding: 20px;\r\n}\r\n\r\n.card-header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.search-bar {\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  text-align: right;\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .record-list {\r\n    padding: 10px;\r\n  }\r\n  \r\n  .search-bar .el-form {\r\n    flex-direction: column;\r\n  }\r\n  \r\n  .search-bar .el-form-item {\r\n    margin-right: 0;\r\n    margin-bottom: 10px;\r\n  }\r\n}\r\n</style>"],"names":["router","useRouter","loading","ref","records","searchForm","reactive","pagination","fetchRecords","error","ElMessage","handleSearch","handleReset","handleCreate","handleView","row","handleEdit","handleDelete","ElMessageBox","handleSizeChange","size","handleCurrentChange","page","getTypeText","type","getStatusType","status","getStatusText","formatTime","time","dayjs","onMounted","_openBlock","_createElementBlock","_hoisted_1","_createVNode","_component_el_card","_createElementVNode","_hoisted_2","_cache","_component_el_button","_component_el_icon","_unref","Plus","_hoisted_3","_component_el_form","_component_el_form_item","_component_el_input","$event","_component_el_select","_component_el_option","_createBlock","_component_el_table","_component_el_table_column","_withCtx","_component_el_tag","_a","_hoisted_4","_component_el_pagination"],"mappings":"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"}