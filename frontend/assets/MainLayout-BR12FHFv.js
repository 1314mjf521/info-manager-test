/* empty css                  *//* empty css                   */import{y as J,r as C,c as O,h as Q,I as i,J as e,R as t,B as c,P as p,z as M,a6 as G,Q as D,u as n,L as I,O as u,al as K,aB as W,A as r,M as X}from"./vendor-CjKLjCsc.js";import{E as m,f as Y,g as Z,h as ee,j as te,e as oe,k as ae,l as se,m as ne,n as le,o as re,p as de,q as ie,r as ce,s as ue,t as _e,u as pe,v as me,w as fe,x as he,y as ye,z as ve,A as we,B as Ee}from"./element-DWu_pZyV.js";import{u as ge}from"./index-DhjtBrJV.js";import{_ as be}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-DtZYWtiR.js";const ke={class:"logo"},xe={class:"header-left"},Be={class:"header-right"},Ce={class:"user-dropdown"},Me={class:"username"},De=J({__name:"MainLayout",setup(Ie){const h=W(),_=ge(),d=C(!1),y=C(!0),A=O(()=>[{path:"/dashboard",title:"仪表板",icon:"Dashboard",permission:null,hidden:!1},{path:"/records",title:"记录管理",icon:"Document",permission:"records:read",hidden:!1},{path:"/record-types",title:"记录类型",icon:"Collection",permission:"system:admin",hidden:!1},{path:"/files",title:"文件管理",icon:"Folder",permission:"files:read",hidden:!1},{path:"/export",title:"数据导出",icon:"Download",permission:"records:read",hidden:!1},{path:"/users",title:"用户管理",icon:"User",permission:"users:read",hidden:!1},{path:"/roles",title:"角色管理",icon:"UserFilled",permission:"system:admin",hidden:!1},{path:"/system",title:"系统管理",icon:"Setting",permission:"system:admin",hidden:!1}]),S=a=>{if(!a)return!0;const[s,l,f="all"]=a.split(":");return _.hasPermission(s,l,f)},L=()=>{d.value=!d.value},v=async()=>{try{y.value?m.success("系统运行正常"):m.warning("系统状态异常")}catch{m.error("无法获取系统状态")}},N=async a=>{switch(a){case"profile":h.push("/profile");break;case"logout":try{await we.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),await _.logout(),m.success("已退出登录"),h.push("/login")}catch{}break}};return Q(()=>{v()}),(a,s)=>{const l=ae,f=Ee,T=Z,U=ee,w=oe,E=re,V=le,z=ie,F=de,H=_e,g=fe,P=me,$=ue,q=te,R=K("router-view"),j=ve,b=Y;return r(),i(b,{class:"layout-container"},{default:e(()=>[t(U,{width:d.value?"64px":"200px",class:"sidebar"},{default:e(()=>[c("div",ke,[c("span",null,p(d.value?"信管":"信息管理系统"),1)]),t(T,{"default-active":a.$route.path,collapse:d.value,"unique-opened":!0,router:"",class:"sidebar-menu"},{default:e(()=>[(r(!0),M(D,null,G(A.value,o=>(r(),M(D,{key:o.path},[!o.hidden&&S(o.permission)?(r(),i(f,{key:0,index:o.path},{title:e(()=>[u(p(o.title),1)]),default:e(()=>[t(l,null,{default:e(()=>[(r(),i(X(o.icon)))]),_:2},1024)]),_:2},1032,["index"])):I("",!0)],64))),128))]),_:1},8,["default-active","collapse"])]),_:1},8,["width"]),t(b,null,{default:e(()=>[t(q,{class:"header"},{default:e(()=>[c("div",xe,[t(w,{type:"text",onClick:L},{default:e(()=>[t(l,null,{default:e(()=>[d.value?(r(),i(n(se),{key:0})):(r(),i(n(ne),{key:1}))]),_:1})]),_:1}),t(V,{separator:"/"},{default:e(()=>{var o;return[t(E,{to:{path:"/"}},{default:e(()=>[...s[0]||(s[0]=[u("首页",-1)])]),_:1}),(o=a.$route.meta)!=null&&o.title?(r(),i(E,{key:0},{default:e(()=>[u(p(a.$route.meta.title),1)]),_:1})):I("",!0)]}),_:1})]),c("div",Be,[t(F,{content:"系统状态",placement:"bottom"},{default:e(()=>[t(z,{"is-dot":!y.value,type:"danger"},{default:e(()=>[t(w,{type:"text",onClick:v},{default:e(()=>[t(l,null,{default:e(()=>[t(n(ce))]),_:1})]),_:1})]),_:1},8,["is-dot"])]),_:1}),t($,{onCommand:N},{dropdown:e(()=>[t(P,null,{default:e(()=>[t(g,{command:"profile"},{default:e(()=>[t(l,null,{default:e(()=>[t(n(he))]),_:1}),s[1]||(s[1]=u(" 个人资料 ",-1))]),_:1}),t(g,{divided:"",command:"logout"},{default:e(()=>[t(l,null,{default:e(()=>[t(n(ye))]),_:1}),s[2]||(s[2]=u(" 退出登录 ",-1))]),_:1})]),_:1})]),default:e(()=>{var o,k;return[c("span",Ce,[t(H,{size:32,src:(o=n(_).user)==null?void 0:o.avatar},{default:e(()=>{var x,B;return[u(p((B=(x=n(_).user)==null?void 0:x.username)==null?void 0:B.charAt(0).toUpperCase()),1)]}),_:1},8,["src"]),c("span",Me,p((k=n(_).user)==null?void 0:k.username),1),t(l,null,{default:e(()=>[t(n(pe))]),_:1})])]}),_:1})])]),_:1}),t(j,{class:"main-content"},{default:e(()=>[t(R)]),_:1})]),_:1})]),_:1})}}}),ze=be(De,[["__scopeId","data-v-edac061e"]]);export{ze as default};
//# sourceMappingURL=MainLayout-BR12FHFv.js.map
