/* empty css                  *//* empty css                 */import{y as k,r as V,l as h,z as v,B as t,R as s,J as n,aB as x,al as y,A,O as d}from"./vendor-CjKLjCsc.js";import{u as E,A as b}from"./index-BKI_CO4v.js";import{b as B,c as F,d as I,e as C,E as u}from"./element-DWu_pZyV.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./utils-DtZYWtiR.js";const L={class:"login-container"},N={class:"login-card"},R={class:"login-footer"},S=k({__name:"LoginView",setup(U){const m=x(),r=E(),p=V(),e=h({username:"",password:""}),g=async()=>{var a,o;if(!e.username||!e.password){u.warning("请输入用户名和密码");return}console.log("=== 登录调试信息 ==="),console.log("用户名:",e.username),console.log("密码:",e.password),console.log("API配置:",b);try{console.log("开始调用authStore.login..."),await r.login({username:e.username,password:e.password}),console.log("authStore.login调用成功"),console.log("认证状态:",r.isAuthenticated),console.log("token:",r.token),console.log("用户信息:",r.user),r.isAuthenticated&&r.token?(u.success("登录成功"),console.log("准备跳转到首页..."),await m.push("/"),console.log("跳转完成")):(console.error("登录状态异常：没有获得token或用户信息"),u.error("登录状态异常，请重试"))}catch(l){console.error("=== 登录错误详情 ==="),console.error("错误对象:",l),console.error("错误消息:",l.message),console.error("错误响应:",(a=l.response)==null?void 0:a.data),console.error("错误状态码:",(o=l.response)==null?void 0:o.status)}};return(a,o)=>{const l=I,i=F,_=C,f=y("router-link"),w=B;return A(),v("div",L,[t("div",N,[o[4]||(o[4]=t("div",{class:"login-header"},[t("h2",null,"信息管理系统"),t("p",null,"欢迎登录")],-1)),s(w,{ref_key:"loginFormRef",ref:p,model:e,class:"login-form"},{default:n(()=>[s(i,null,{default:n(()=>[s(l,{modelValue:e.username,"onUpdate:modelValue":o[0]||(o[0]=c=>e.username=c),placeholder:"请输入用户名",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),s(i,null,{default:n(()=>[s(l,{modelValue:e.password,"onUpdate:modelValue":o[1]||(o[1]=c=>e.password=c),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),s(i,null,{default:n(()=>[s(_,{type:"primary",size:"large",class:"login-btn",onClick:g},{default:n(()=>[...o[2]||(o[2]=[d(" 登录 ",-1)])]),_:1})]),_:1}),t("div",R,[s(f,{to:"/register"},{default:n(()=>[...o[3]||(o[3]=[d("还没有账号？立即注册",-1)])]),_:1})])]),_:1},8,["model"])])])}}}),q=z(S,[["__scopeId","data-v-b1ce9080"]]);export{q as default};
//# sourceMappingURL=LoginView-BXAUgJxK.js.map
