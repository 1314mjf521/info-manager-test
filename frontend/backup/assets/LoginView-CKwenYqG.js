import{_ as k}from"./_plugin-vue_export-helper-BJA4NJ9J.js";/* empty css                     *//* empty css                  *//* empty css                    *//* empty css                 */import{y,r as f,l as h,h as E,aB as U,j as B,z as I,B as l,R as r,J as t,a4 as L,al as R,A as C,O as p,u as F}from"./vendor-B2dHd6i_.js";import{u as S}from"./index-Co-C_Vux.js";import{b as z,c as q,d as A,e as M,f as N,E as _}from"./element-CUclIBtA.js";import"./utils-xdQVjYpF.js";const K={class:"login-container"},j={class:"login-card"},J={class:"login-footer"},O=y({__name:"LoginView",setup(T){const m=U(),u=S(),d=f(),s=h({username:"",password:""}),n=f(!1),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"用户名长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:50,message:"密码长度在 6 到 50 个字符",trigger:"blur"}]},c=async()=>{if(d.value)try{await d.value.validate(),await u.login(s),_.success("登录成功");const o=m.currentRoute.value.query.redirect;m.push(o||"/")}catch(o){console.error("Login failed:",o),_.error(o.message||"登录失败")}};return E(()=>{u.isAuthenticated&&m.push("/");const o=localStorage.getItem("rememberedUsername");o&&(s.username=o,n.value=!0)}),B(n,o=>{o&&s.username?localStorage.setItem("rememberedUsername",s.username):localStorage.removeItem("rememberedUsername")}),(o,e)=>{const g=A,i=q,b=M,w=N,V=R("router-link"),x=z;return C(),I("div",K,[l("div",j,[e[6]||(e[6]=l("div",{class:"login-header"},[l("h2",null,"信息管理系统"),l("p",null,"欢迎登录")],-1)),r(x,{ref_key:"loginFormRef",ref:d,model:s,rules:v,class:"login-form",onKeyup:L(c,["enter"])},{default:t(()=>[r(i,{prop:"username"},{default:t(()=>[r(g,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=a=>s.username=a),placeholder:"请输入用户名",size:"large","prefix-icon":"User",clearable:""},null,8,["modelValue"])]),_:1}),r(i,{prop:"password"},{default:t(()=>[r(g,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.password=a),type:"password",placeholder:"请输入密码",size:"large","prefix-icon":"Lock","show-password":"",clearable:""},null,8,["modelValue"])]),_:1}),r(i,null,{default:t(()=>[r(b,{modelValue:n.value,"onUpdate:modelValue":e[2]||(e[2]=a=>n.value=a)},{default:t(()=>[...e[3]||(e[3]=[p("记住我",-1)])]),_:1},8,["modelValue"])]),_:1}),r(i,null,{default:t(()=>[r(w,{type:"primary",size:"large",class:"login-btn",loading:F(u).isLoading,onClick:c},{default:t(()=>[...e[4]||(e[4]=[p(" 登录 ",-1)])]),_:1},8,["loading"])]),_:1}),l("div",J,[r(V,{to:"/register",class:"register-link"},{default:t(()=>[...e[5]||(e[5]=[p(" 还没有账号？立即注册 ",-1)])]),_:1})])]),_:1},8,["model"])])])}}}),$=k(O,[["__scopeId","data-v-6d60c799"]]);export{$ as default};
//# sourceMappingURL=LoginView-CKwenYqG.js.map
