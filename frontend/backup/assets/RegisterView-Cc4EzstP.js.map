{"version":3,"file":"RegisterView-Cc4EzstP.js","sources":["../../src/views/auth/RegisterView.vue"],"sourcesContent":["<template>\r\n  <div class=\"register-container\">\r\n    <div class=\"register-card\">\r\n      <div class=\"register-header\">\r\n        <h2>信息管理系统</h2>\r\n        <p>创建新账号</p>\r\n      </div>\r\n      \r\n      <el-form\r\n        ref=\"registerFormRef\"\r\n        :model=\"registerForm\"\r\n        :rules=\"registerRules\"\r\n        class=\"register-form\"\r\n        @keyup.enter=\"handleRegister\"\r\n      >\r\n        <el-form-item prop=\"username\">\r\n          <el-input\r\n            v-model=\"registerForm.username\"\r\n            placeholder=\"请输入用户名\"\r\n            size=\"large\"\r\n            prefix-icon=\"User\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item prop=\"email\">\r\n          <el-input\r\n            v-model=\"registerForm.email\"\r\n            placeholder=\"请输入邮箱\"\r\n            size=\"large\"\r\n            prefix-icon=\"Message\"\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item prop=\"password\">\r\n          <el-input\r\n            v-model=\"registerForm.password\"\r\n            type=\"password\"\r\n            placeholder=\"请输入密码\"\r\n            size=\"large\"\r\n            prefix-icon=\"Lock\"\r\n            show-password\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item prop=\"confirmPassword\">\r\n          <el-input\r\n            v-model=\"registerForm.confirmPassword\"\r\n            type=\"password\"\r\n            placeholder=\"请确认密码\"\r\n            size=\"large\"\r\n            prefix-icon=\"Lock\"\r\n            show-password\r\n            clearable\r\n          />\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-checkbox v-model=\"agreeTerms\">\r\n            我已阅读并同意\r\n            <a href=\"#\" class=\"terms-link\">《用户协议》</a>\r\n          </el-checkbox>\r\n        </el-form-item>\r\n        \r\n        <el-form-item>\r\n          <el-button\r\n            type=\"primary\"\r\n            size=\"large\"\r\n            class=\"register-btn\"\r\n            :loading=\"authStore.isLoading\"\r\n            :disabled=\"!agreeTerms\"\r\n            @click=\"handleRegister\"\r\n          >\r\n            注册\r\n          </el-button>\r\n        </el-form-item>\r\n        \r\n        <div class=\"register-footer\">\r\n          <router-link to=\"/login\" class=\"login-link\">\r\n            已有账号？立即登录\r\n          </router-link>\r\n        </div>\r\n      </el-form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup lang=\"ts\">\r\nimport { ref, reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport { ElMessage, type FormInstance, type FormRules } from 'element-plus'\r\nimport { useAuthStore } from '@/stores/auth'\r\nimport type { RegisterRequest } from '@/types'\r\n\r\nconst router = useRouter()\r\nconst authStore = useAuthStore()\r\n\r\n// 表单引用\r\nconst registerFormRef = ref<FormInstance>()\r\n\r\n// 表单数据\r\nconst registerForm = reactive<RegisterRequest>({\r\n  username: '',\r\n  email: '',\r\n  password: '',\r\n  confirmPassword: ''\r\n})\r\n\r\n// 同意条款\r\nconst agreeTerms = ref(false)\r\n\r\n// 自定义验证器\r\nconst validateConfirmPassword = (rule: any, value: string, callback: any) => {\r\n  if (value !== registerForm.password) {\r\n    callback(new Error('两次输入的密码不一致'))\r\n  } else {\r\n    callback()\r\n  }\r\n}\r\n\r\n// 表单验证规则\r\nconst registerRules: FormRules = {\r\n  username: [\r\n    { required: true, message: '请输入用户名', trigger: 'blur' },\r\n    { min: 3, max: 20, message: '用户名长度在 3 到 20 个字符', trigger: 'blur' },\r\n    { pattern: /^[a-zA-Z0-9_]+$/, message: '用户名只能包含字母、数字和下划线', trigger: 'blur' }\r\n  ],\r\n  email: [\r\n    { required: true, message: '请输入邮箱', trigger: 'blur' },\r\n    { type: 'email', message: '请输入正确的邮箱格式', trigger: 'blur' }\r\n  ],\r\n  password: [\r\n    { required: true, message: '请输入密码', trigger: 'blur' },\r\n    { min: 6, max: 50, message: '密码长度在 6 到 50 个字符', trigger: 'blur' },\r\n    { pattern: /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d@$!%*?&]{6,}$/, message: '密码必须包含大小写字母和数字', trigger: 'blur' }\r\n  ],\r\n  confirmPassword: [\r\n    { required: true, message: '请确认密码', trigger: 'blur' },\r\n    { validator: validateConfirmPassword, trigger: 'blur' }\r\n  ]\r\n}\r\n\r\n// 处理注册\r\nconst handleRegister = async () => {\r\n  if (!registerFormRef.value) return\r\n  \r\n  try {\r\n    await registerFormRef.value.validate()\r\n    \r\n    if (!agreeTerms.value) {\r\n      ElMessage.warning('请先同意用户协议')\r\n      return\r\n    }\r\n    \r\n    await authStore.register(registerForm)\r\n    \r\n    ElMessage.success('注册成功，请登录')\r\n    router.push('/login')\r\n    \r\n  } catch (error: any) {\r\n    console.error('Register failed:', error)\r\n    ElMessage.error(error.message || '注册失败')\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.register-container {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  min-height: 100vh;\r\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n  padding: 20px;\r\n}\r\n\r\n.register-card {\r\n  width: 100%;\r\n  max-width: 400px;\r\n  background: white;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);\r\n  padding: 40px;\r\n}\r\n\r\n.register-header {\r\n  text-align: center;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.logo {\r\n  width: 64px;\r\n  height: 64px;\r\n  margin-bottom: 16px;\r\n}\r\n\r\n.register-header h2 {\r\n  color: #303133;\r\n  margin-bottom: 8px;\r\n  font-size: 24px;\r\n  font-weight: 600;\r\n}\r\n\r\n.register-header p {\r\n  color: #909399;\r\n  font-size: 14px;\r\n}\r\n\r\n.register-form {\r\n  margin-top: 32px;\r\n}\r\n\r\n.register-btn {\r\n  width: 100%;\r\n  height: 44px;\r\n  font-size: 16px;\r\n  font-weight: 500;\r\n}\r\n\r\n.terms-link {\r\n  color: #409eff;\r\n  text-decoration: none;\r\n}\r\n\r\n.terms-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n.register-footer {\r\n  text-align: center;\r\n  margin-top: 24px;\r\n}\r\n\r\n.login-link {\r\n  color: #409eff;\r\n  text-decoration: none;\r\n  font-size: 14px;\r\n}\r\n\r\n.login-link:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 480px) {\r\n  .register-card {\r\n    padding: 24px;\r\n    margin: 0 16px;\r\n  }\r\n  \r\n  .register-header h2 {\r\n    font-size: 20px;\r\n  }\r\n}\r\n</style>"],"names":["router","useRouter","authStore","useAuthStore","registerFormRef","ref","registerForm","reactive","agreeTerms","registerRules","rule","value","callback","handleRegister","ElMessage","error","_openBlock","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_createVNode","_component_el_form","_component_el_form_item","_component_el_input","_cache","$event","_component_el_checkbox","_component_el_button","_unref","_hoisted_3","_component_router_link"],"mappings":"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"}